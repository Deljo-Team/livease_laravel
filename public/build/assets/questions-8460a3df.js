import{a}from"./axios-4a70c6fc.js";window.addEventListener("load",function(){var f=document.querySelector('meta[name="csrf-token"]').getAttribute("content");let p=document.getElementById("category"),r=document.getElementById("sub_category");p.value!=""&&r.value!=""&&y(r.value),p.addEventListener("change",function(){let d=this.value;if(d=="")return;let m=document.getElementById("question-section");m.innerHTML="";let c=sub_category_url,e={categories:[d],_token:f};a.post(c,e).then(function(t){let n=(t.data.Data.categories||[])[0].sub_categories||[];r.innerHTML="";let l=s("","Select Subcategory");r.appendChild(l),n.forEach(function(i){let u=s(i.id,i.name);r.appendChild(u)})}).catch(function(t){console.log(t)})}),r.addEventListener("change",function(){this.value!=""&&y(r.value)});function y(d){let m=`${question_url}/show`;return a.post(m,{subcategory_id:d,_token:f}).then(function(c){let e=document.getElementById("question-section");e.innerHTML=c.data.html,h()})}function s(d,m){let c=document.createElement("option");return c.value=d,c.innerText=m,c}});function h(){let f=document.querySelector('meta[name="csrf-token"]').getAttribute("content");document.querySelectorAll(".priority").forEach(function(e){e.addEventListener("click",function(){let t=this.closest(".accordion-header").dataset.id,o=this.dataset.move,n=`${question_url}/priority`,l={priority:o,id:t,_token:f};a.post(n,l).then(function(i){let u=document.getElementById("sub_category");c(u.value)}).catch(function(i){console.log(i)})})}),document.querySelectorAll(".status").forEach(function(e){e.addEventListener("click",function(){let t=this.closest(".accordion-header").dataset.id,o=this.dataset.status,n=`${question_url}/status`,l={status:o,id:t,_token:f};a.post(n,l).then(function(i){let u=document.getElementById("sub_category");c(u.value)}).catch(function(i){console.log(i)})})});let y=document.getElementById("add-question");var s=new bootstrap.Modal(document.getElementById("myModal"));y.addEventListener("click",function(){let e=`${question_url}/create`,t={};a.post(e,t).then(function(o){let n=document.getElementById("modal-content");n.innerHTML=o.data.html,s.show(),_()}).catch(function(o){s.hide();let n=document.getElementById("modal-content");n.innerHTML="",console.log(o)})}),document.querySelectorAll(".edit").forEach(function(e){e.addEventListener("click",function(){let t=document.querySelector('meta[name="csrf-token"]').getAttribute("content"),o=this.closest(".accordion-header").dataset.id,n=`${question_url}/edit`,l={id:o,_token:t};a.post(n,l).then(function(i){let u=document.getElementById("modal-content");u.innerHTML=i.data.html,s.show(),_()}).catch(function(i){s.hide();let u=document.getElementById("modal-content");u.innerHTML="",console.log(i)})})}),document.querySelectorAll(".delete").forEach(function(e){e.addEventListener("click",function(){let t=this.closest(".accordion-header").dataset.id,o=`${question_url}/destroy`,n={id:t};swal.fire({title:"Are you sure?",text:"This will delete the item permanently.",icon:"warning",showCancelButton:!0,confirmButtonText:"Delete",cancelButtonText:"Cancel"}).then(l=>{l.value&&a.post(o,n).then(function(i){i.data.success?swal.fire("Success","Question deleted successfully","success").then(function(){let u=document.getElementById("sub_category");c(u.value)}):swal.fire("Error",i.data.message,"error")}).catch(function(i){console.log(i)})})})});function c(e){let t=document.querySelector('meta[name="csrf-token"]').getAttribute("content"),o=`${question_url}/show`;return a.post(o,{subcategory_id:e,_token:t}).then(function(n){let l=document.getElementById("question-section");l.innerHTML=n.data.html,h()})}}function _(){let f=document.getElementById("question-type");f!=null&&f.addEventListener("change",function(){let e=document.getElementById("option-create");this.value=="select"?(e.classList.remove("d-none"),s()):e.classList.add("d-none")}),document.querySelectorAll(".remove-option").forEach(function(e){e.addEventListener("click",d)}),document.getElementById("add-option").addEventListener("click",y);function y(){let t=document.querySelector(".option-row").cloneNode(!0),n=document.getElementById("option-list").appendChild(t);n.querySelector(".option").value="",n.querySelector(".remove-option").addEventListener("click",d),s()}function s(){let e=document.querySelectorAll(".option-row");document.querySelectorAll(".remove-option").forEach(function(o){if(e.length<2){o.classList.add("d-none");return}else o.classList.remove("d-none")})}function d(e){this.closest(".option-row").remove(),s()}let m=document.getElementById("submit");m!=null&&m.addEventListener("click",function(){let e=document.getElementById("question-form"),t=new FormData(e),n=document.getElementById("sub_category").value;t.append("sub_category_id",n);let l=`${question_url}/store`,i=document.getElementById("form_type").value,u="Question added successfully";if(i=="edit"){let g=document.getElementById("question_id").value;t.append("id",g),l=`${question_url}/update`,u="Question updated successfully"}a.post(l,t).then(function(g){g.data.success?swal.fire("Success",u,"success").then(function(){bootstrap.Modal.getInstance(document.getElementById("myModal")).hide(),c(n)}):swal.fire("Error",g.data.message,"error").then(function(){c(n)})}).catch(function(g){console.log(g)})});function c(e){let t=document.querySelector('meta[name="csrf-token"]').getAttribute("content"),o=`${question_url}/show`;return a.post(o,{subcategory_id:e,_token:t}).then(function(n){let l=document.getElementById("question-section");l.innerHTML=n.data.html,h()})}}
